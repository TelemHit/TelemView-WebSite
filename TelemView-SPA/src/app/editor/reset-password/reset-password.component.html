<app-nav></app-nav>
<div class="container login-container">
    <h1 class="card-title text-center">החלפת סיסמה</h1>

    <form [formGroup]="resetPasswordForm" autocomplete="off" novalidate
        (ngSubmit)="resetPassword(resetPasswordForm.value)">
        <div class="row justify-content-center">
            <div class="form-group  col-lg-5 col-md-7 col-sm-8">
                <label for="password" class="form-label">סיסמה:</label>
                <div>
                    <input type="password" id="password" formControlName="password" class="form-control" [ngClass]="{'is-invalid': validateControl('password') && hasError('password', 'required')
                        || validateControl('password') && hasError('password', 'pattern')}"
                        (focus)='resetAlert()' />

                    <div class="invalid-feedback"
                        *ngIf="validateControl('password') && hasError('password', 'required')">יש
                        להזין סיסמה</div>
                    <div class="invalid-feedback"
                        *ngIf="validateControl('password') && hasError('password', 'pattern')">יש
                        להזין סיסמה תיקנית</div>
                </div>

                <ul>
                    <li><small>לפחות 8 תווים</small></li>
                    <li><small>לפחות אות קטנה אחת</small></li>
                    <li><small>לפחות אות גדולה אחת</small></li>
                    <li><small>לפחות מספר אחד</small></li>
                </ul>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="form-group  col-lg-5 col-md-7 col-sm-8">
                <label for="confirm" class="form-label">אישור סיסמה:</label>
                <div>
                    <input type="password" id="confirm" formControlName="confirm" class="form-control" [ngClass]="{'is-invalid': validateControl('confirm') && hasError('confirm', 'required')
                || validateControl('confirm') && hasError('confirm', 'mustMatch')}" 
                (focus)='resetAlert()'/>

                    <div class="invalid-feedback" *ngIf="validateControl('confirm') && hasError('confirm', 'required')">
                        יש להזין
                        את הסיסמה שנית</div>
                    <div class="invalid-feedback" *ngIf="hasError('confirm', 'mustMatch')">הסיסמאות לא תואמות</div>
                </div>
            </div>
        </div>
        <br>

            <p *ngIf="showError" role="alert" class="text-center text-danger" [innerHTML]="errorMessage"></p>
           
        <div class="form-group row justify-content-center">
            <button type="submit" class="col-lg-2 col-md-3 btn btn-primary-dark"
                [disabled]="!resetPasswordForm.valid">אישור
                <ngx-spinner [fullScreen]="false" type="ball-spin-clockwise" size="small" color="white"></ngx-spinner>
            </button>
        </div>
        <div class="form-group row justify-content-center">
            <a  [routerLink]="['/editor']">חזרה לעמוד הכניסה</a>
          </div>
    </form>
</div>